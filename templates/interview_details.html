<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Record Interview</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <link
      rel="icon"
      type="image/x-icon"
      href="../static/img/logo-icon-white.png"
    />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icon Font Stylesheet -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />

    <!-- Bootstrap Stylesheet -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>

    <!--Firebase Authentication-->
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-auth-compat.js"></script>
    <script
      type="module"
      src="https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js"
    ></script>

    <!-- Template Stylesheet -->
    <link href="../static/css/style.css" rel="stylesheet" />
  </head>

  <body>
    <div class="container-xxl bg-white p-0">
      <!-- Spinner Start -->
      <div
        id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center"
      >
        <div
          class="spinner-border text-success-2"
          style="width: 3rem; height: 3rem"
          role="status"
        >
          <span class="sr-only">Loading...</span>
        </div>
      </div>
      <!-- Spinner End -->

      <!-- Navbar Start -->
      <div class="container-fluid bg-dark-2 px-0 fixed-top">
        <div class="row gx-0">
          <div class="col-lg-3 bg-dark-2 d-none d-lg-block">
            <a
              href="index.html"
              class="navbar-brand w-100 h-100 m-0 p-0 d-flex align-items-center justify-content-center"
            >
              <img
                class=""
                src="../static/img/logo-text-white.png"
                style="width: 65%; height: 75%"
              />
            </a>
          </div>
          <div class="col-lg-9">
            <nav
              class="navbar navbar-expand-lg bg-dark-2 navbar-dark p-2 p-lg-0 justify-content-left"
            >
              <a href="index.html" class="navbar-brand d-block d-lg-none">
                <h1 class="m-0 text-light text-uppercase">
                  Automated Interviews
                </h1>
              </a>
              <button
                type="button"
                class="navbar-toggler p-auto"
                data-bs-toggle="collapse"
                data-bs-target="#navbarCollapse"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
              <div
                class="collapse navbar-collapse align-items-center"
                id="navbarCollapse"
              >
                <div
                  class="navbar-nav mr-auto py-0 d-flex justify-content-center"
                >
                  <a href="index.html" class="nav-item nav-link"
                    ><strong>Home</strong></a
                  >
                  <a href="index.html" class="nav-item nav-link"
                    ><strong>Features</strong></a
                  >
                  <a href="index.html" class="nav-item nav-link"
                    ><strong>Team</strong></a
                  >
                  <a href="index.html" class="nav-item nav-link"
                    ><strong>About</strong></a
                  >
                  <a href="index.html" class="nav-item nav-link"
                    ><strong>Contact</strong></a
                  >
                </div>
              </div>
            </nav>
          </div>
        </div>
      </div>
      <!-- Navbar End -->

      <!-- User data Start -->
      <div class="container-xxl py-5 top-gap">
        <div class="container">
          <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h6 class="section-title text-center text-dark text-uppercase">
              Interview Recording Portal
            </h6>
            <h1 class="mb-5">
              Smart <span class="text-success-2">Hiring</span>
            </h1>
          </div>
        </div>

        <!-- Interview Code Section Start -->
        <div
          class="text-center border mb-5 py-2 fading-ease-1"
          id="interview-code-section"
          style="display: block"
        >
          <h5 class="text-align-center mb-3">Enter Interview Code</h5>

          <div class="text-center">
            <label for="code-verify-input"
              >Required<span class="text-danger">*</span></label
            >
            <input
              type="text"
              maxlength="6"
              class="form-control text-center d-block mx-auto"
              id="code-verify-input"
              placeholder="Interview Code"
              style="max-width: 300px"
              required
            />
          </div>
          <div class="d-flex justify-content-center">
            <div
              class="spinner-grow text-success-2 mt-3"
              role="status"
              id="spinner-mode"
              style="display: none"
            >
              <span class="sr-only">Loading...</span>
            </div>
            <button
              class="btn btn-success-2 text-light mt-3"
              id="verify-code-button"
            >
              Verify Code
            </button>
          </div>
          <h6 class="text-danger mt-3" id="verify-code-database"></h6>
        </div>
        <!-- Interview Code Section End -->

        <!-- User Agreement Section Start -->
        <div
          class="text-left border mb-5 py-2 fading-ease-1"
          id="user-agreement-section"
          style="display: none"
        >
          <h5 class="text-align-center m-3 fw-bolder">User Agreement</h5>

          <div class="text-left px-4 mb-3">
            <p>
              By participating in this automated interview process, you
              acknowledge and agree to the following terms:
            </p>
            <ol>
              <li>
                <b>Consent to Data Collection:</b>
                <p>
                  You hereby consent to the collection, processing, and storage
                  of your facial expressions, emotions, and voice/tone by
                  Artificial Intelligence (AI) algorithms during the automated
                  interview.
                </p>
              </li>
              <li>
                <b>Purpose of Data Collection:</b>
                <p>
                  The collected data will be used solely for the purpose of
                  analyzing and evaluating your responses during the interview
                  process. This information will aid in assessing your
                  suitability for the position for which you are applying.
                </p>
              </li>
              <li>
                <b>Automated Processing:</b>
                <p>
                  Your data will be processed using artificial intelligence
                  algorithms to assess various aspects, including facial
                  expressions and voice modulation, to derive insights related
                  to your responses.
                </p>
              </li>
              <li>
                <b>Confidentiality and Security: </b>
                <p>
                  We are committed to maintaining the confidentiality and
                  security of your data. Your information will be stored
                  securely, and access will be restricted to authorized
                  personnel only.
                </p>
              </li>
              <li>
                <b>Third-Party Involvement:</b>
                <p>
                  We will not share your data with any third parties without
                  your explicit consent unless required by law.
                </p>
              </li>
            </ol>
          </div>

          <div class="form-check text-left m-5">
            <input
              type="checkbox"
              class="form-check-input"
              id="agree-checkbox"
              required
            />
            <label class="form-check-label" for="agree-checkbox"
              >By continuing with the automated interview process, you affirm
              that you have
              <b>read, understood, and agreed to the terms</b> outlined in this
              agreement.</label
            >
          </div>

          <div class="d-flex justify-content-center">
            <button
              class="btn btn-success-2 text-light mt-3"
              id="proceed-button"
            >
              Proceed
            </button>
          </div>
          <div>
            <h6
              class="text-center text-danger mt-3"
              id="proceed-data-not-checked"
            ></h6>
          </div>
        </div>
        <!-- User Agreement Section End -->

        <!-- User Information Section Start-->
        <div
          class="border py-2 mb-5 fading-ease-2"
          id="user-data-section"
          style="display: none"
        >
          <div class="text-center">
            <div class="row justify-content-center">
              <form class="col-md-8 text-center">
                <h5 class="text-align-center mb-3">Candidate Information</h5>
                <div class="form-group row">
                  <div class="col-md-4">
                    <input
                      type="text"
                      class="form-control text-center d-block mx-auto"
                      style="max-width: 300px"
                      placeholder="Name*"
                      id="candidate-name"
                      required
                    />
                  </div>
                  <div class="col-md-4">
                    <input
                      type="text"
                      class="form-control text-center d-block mx-auto"
                      style="max-width: 300px"
                      placeholder="Email*"
                      id="candidate-email"
                      required
                    />
                  </div>
                  <div class="col-md-4">
                    <input
                      type="text"
                      class="form-control text-center d-block mx-auto"
                      style="max-width: 300px"
                      placeholder="Contact*"
                      id="candidate-contact"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-md-12">
                    <div class="d-flex justify-content-center">
                      <div
                        class="spinner-grow text-success-2 mt-3"
                        role="status"
                        id="spinner-mode-2"
                        style="display: none"
                      >
                        <span class="sr-only">Loading...</span>
                      </div>
                      <button
                        class="btn btn-success-2 text-light mt-3"
                        id="start-interview-button"
                      >
                        Start Interview
                      </button>
                    </div>
                    <h6 class="text-danger mt-3" id="store-user-database"></h6>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <!-- User Information Section End -->

        <!-- Video Section Start-->
        <div class="py-2 border" id="video-section" style="display: none">
          <div
            class="d-flex flex-row justify-content-between px-5"
            id="timerContainer"
          >
            <div class="d-flex flex-column align-items-start" id="questionTime">
              <h5>
                Question Time:
                <strong
                  ><span class="text-success-2" id="question-timer"></span
                ></strong>
              </h5>
            </div>
            <div class="d-flex flex-column align-items-end" id="timer">
              <h5>
                Total Time left:
                <strong
                  ><span class="text-primary" id="total-timer"></span
                ></strong>
              </h5>
            </div>
          </div>
          <div class="row text-center">
            <div class="col d-flex flex-column align-items-center">
              <h5 class="align-self-center mt-2">Questions</h5>
              <div
                class="row justify-content-center flex-grow-1 align-items-center"
              >
                <h5 class="text-center" id="question-display">Question No.</h5>
                <h5 class="text-center" id="interview-status"></h5>
              </div>
            </div>

            <div class="col justify-content-center">
              <h5 class="mt-2">Video</h5>
              <div class="video-container text-center">
                <!-- <video class="video-element" id="video" autoplay></video> -->
                <!-- <img data-aos="fade-up" src="{{ url_for('video') }}" style="height:300px; width:400px;margin-top: 20px;"> -->
              </div>
            </div>

            <div class="buttons">
              <button
                class="btn btn-warning text-dark justify-content-center text-center"
                id="start-video-button"
                style="display: d-flex"
                onclick="startRecording()"
              >
                Start Recording
              </button>
              <button
                class="btn btn-info text-dark justify-content-center text-center"
                id="next-question-button"
                style="display: d-flex"
              >
                Next Question
              </button>
              <button
                class="btn btn-danger text-light justify-content-center text-center"
                id="stop-video-button"
                onclick="stopRecording()"
              >
                Stop Recording
              </button>
            </div>
          </div>
          <div class="row text-center d-flex">
            <button
              class="btn btn-dark text-light d-flex justify-content-center text-center mx-auto my-4"
              id="submit-interview"
              style="max-width: fit-content"
              onclick="analyze()"
            >
              Submit Interview
            </button>
          </div>
          <div id="resultDiv">
            <h4>Summary</h4>
            {{ result }}
          </div>
        </div>
        <!-- Video Section End-->
      </div>
      <!-- User data End -->

      <!-- Footer Start  -->
      <div
        class="container-fluid bg-success-2 text-light footer wow fadeIn"
        id="footer"
        data-wow-delay="0.1s"
      >
        <div class="container pb-5">
          <div class="row">
            <div class="col-md-6 col-lg-4">
              <div class="bg-dark-2 rounded p-4">
                <a href="index.html" style="text-decoration: none"
                  ><img
                    class="pb-2"
                    src="../static/img/logo-text-white.png"
                    style="width: 80%; height: 80%"
                /></a>
                <p class="text-white mb-0">
                  Assist your hiring experience by integrating the Artificial
                  Intelligence and tailored experience to fasten the
                  <strong>recruitment process</strong>.
                </p>
              </div>
            </div>
            <div class="col-md-6 col-lg-3">
              <h6
                class="section-title text-start text-light text-uppercase mb-4"
              >
                <strong>Contact</strong>
              </h6>
              <p class="mb-2">
                <i class="fa fa-map-marker-alt me-3"></i>Sukkur IBA University,
                Nisar Ahmed Siddiqui Road, Sukkur-65200, Pakistan
              </p>
              <p class="mb-2">
                <i class="fa fa-phone-alt me-3"></i>+92 336 6636686
              </p>
              <p class="mb-2">
                <i class="fa fa-envelope me-3"></i>info@autointerviews.com
              </p>
              <div class="d-flex pt-2">
                <a
                  class="btn btn-outline-light btn-social"
                  href="https://www.twitter.com/isyedahmed531"
                  ><i class="fab fa-twitter"></i
                ></a>
                <a
                  class="btn btn-outline-light btn-social"
                  href="https://www.facebook.com/isyedahmed531"
                  ><i class="fab fa-facebook-f"></i
                ></a>
                <a
                  class="btn btn-outline-light btn-social"
                  href="https://www.linkedin.com/in/isyedahmed531"
                  ><i class="fab fa-linkedin-in"></i
                ></a>
              </div>
            </div>
            <div class="col-lg-5">
              <div class="row">
                <div class="col-md-6">
                  <h6
                    class="section-title text-start text-light text-uppercase mb-4"
                  >
                    <strong>Company</strong>
                  </h6>
                  <a style="text-decoration: none" class="btn btn-link" href=""
                    >About Us</a
                  >
                  <a style="text-decoration: none" class="btn btn-link" href=""
                    >Contact Us</a
                  >
                  <a style="text-decoration: none" class="btn btn-link" href=""
                    >Privacy Policy</a
                  >
                  <a style="text-decoration: none" class="btn btn-link" href=""
                    >Terms & Condition</a
                  >
                  <a style="text-decoration: none" class="btn btn-link" href=""
                    >Support</a
                  >
                </div>
                <div class="col-md-6">
                  <h6
                    style="text-decoration: none"
                    class="section-title text-start text-light text-uppercase mb-4"
                  >
                    <strong>Navigation</strong>
                  </h6>
                  <a
                    style="text-decoration: none"
                    class="btn btn-link"
                    href="video.html"
                    >Record candidate Interview
                  </a>
                  <a
                    style="text-decoration: none"
                    class="btn btn-link"
                    href="login.html"
                    >Company Dashboard</a
                  >
                  <a
                    style="text-decoration: none"
                    class="btn btn-link"
                    href="404.html"
                    >Interviewee Dashboard</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container">
          <div class="copyright">
            <div class="row">
              <div class="col-md-12 text-center mb-3 mb-md-0">
                &copy;
                <a style="text-decoration: none" href="#"
                  ><strong>Automated Interviews</strong></a
                >
                2023, All Right Reserved. Designed By
                <a style="text-decoration: none" href="#"
                  ><strong>Syed Ahmed - Agha Asif Durani</strong></a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer End -->

      <!-- Back to Top -->
      <a href="#" class="btn btn-lg btn-dark btn-lg-square back-to-top"
        ><i class="bi bi-arrow-up"></i
      ></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../static/lib/wow/wow.min.js"></script>
    <!-- Template Javascript -->
    <script src="../static/js/main.js"></script>
    <script src="../static/js/video-portal.js"></script>
    <script>
      function startRecording() {
        fetch('/start_recording')
      }
      function stopRecording() {
        fetch('/stop_recording')
      }
      function analyze() {
        // fetch('/analyze_results');
        fetch('/analyze_results')
          .then((response) => response.text())
          .then((data) => {
            document.getElementById('resultDiv').innerText = data
          })
      }
    </script>
  </body>
</html>
